# ====== 使用说明 ======
#把上面内容保存为 vision_system/.env.sample（你已要求的示例文件）。在部署前复制一份为 .env 并根据实际环境修改值：
#cp .env.sample .env

# ====== 基本服务配置 ======
# FastAPI 监听地址与端口
FASTAPI_HOST=0.0.0.0
FASTAPI_PORT=8000

# 前端 dev server（Vite）默认端口（仅开发时用）
FRONTEND_HOST=0.0.0.0
FRONTEND_PORT=5173

# 是否以 debug 模式启动（只用于开发）
DEBUG=false

# 是否在 deploy 脚本中自动以 uvicorn 启动后端（0/1）
START_SERVER=0

# 最大上传文件大小（MB）用于模型上传接口
UPLOAD_LIMIT_MB=512

# ====== 摄像头 / 数据源 ======
# 本地RGB 摄像头索引（0 = 系统第一个摄像头）
CAMERA_IDX=0

# 热像（Thermal）摄像头索引或设备路径（例如 /dev/video1 或 1）
THERMAL_CAMERA_IDX=1

# 若使用 RTSP 流，可在此设置（优先于本地摄像头）
RTSP_URL=

# MJPEG 流 JPG 质量（1-100）
MJPEG_QUALITY=80

# ====== 模型和运行时 ======
# 运行设备: "cpu" 或 "cuda"
DEVICE=cuda

# CUDA 可见设备（字符串形式，例如 "0" 或 "0,1"）
CUDA_VISIBLE_DEVICES=0

# 是否启用 TensorRT（只在已安装并配置好 TensorRT 时设为 true）
USE_TRT=false

# TensorRT engine 路径（若 USE_TRT=true 则填写）
TRT_ENGINE_PATH=./models/exported/best_fp16.engine

# ONNX 模型路径（后端 ONNX 推理使用）
ONNX_MODEL_PATH=./models/exported/best.onnx

# PyTorch/pt 权重路径（训练/ultralytics 推理）
PT_MODEL_PATH=./models/exported/best.pt

# 模型存放目录（上传接口会把模型保存到这里）
MODEL_DIR=./models/exported

# ONNX Runtime providers（逗号分隔），例子: "CUDAExecutionProvider,CPUExecutionProvider"
ORT_PROVIDERS=CUDAExecutionProvider,CPUExecutionProvider

# ONNX runtime cpu/gpu 优先级（cpu/gpu）
ORT_PREFER=auto

# ====== 推理参数 （可通过 API 动态覆盖）=====
# 输入图像边长 (square), e.g. 640
INPUT_SIZE=640

# 置信度阈值
CONF_THRESHOLD=0.25

# NMS IOU 阈值
IOU_THRESHOLD=0.45

# 推理 batch 大小（在线推理通常为1）
BATCH_SIZE=1

# 最大并发工作线程数（数据读取 / 推理线程池）
MAX_WORKERS=4

# ====== 热图 / 融合配置 ======
# 是否启用热红外融合（true/false）
USE_FUSION=true

# 热图叠加 alpha（0.0 - 1.0）
HEATMAP_ALPHA=0.45

# 热图阈值（伪彩或告警阈值，0-255）
HEATMAP_THRESHOLD=200

# 热图 colormap: jet, hot, inferno, etc.
HEATMAP_COLORMAP=jet

# Homography 文件（thermal -> rgb 单应矩阵）
HOMOGRAPHY_PATH=./models/homography/homography.json

# ====== 训练 / 导出相关配置 ======
# 训练数据配置文件（Ultralytics 格式 dataset.yaml）
DATASET_YAML=./configs/dataset.yaml

# 训练输出目录（runs/train/...）
TRAIN_OUTPUT_DIR=./runs/train

# 导出 ONNX 时是否使用 FP16（true/false）
EXPORT_FP16=false

# export opset 版本
EXPORT_ONNX_OPSET=12

# ====== 日志 / 路径 ======
# 日志目录与日志等级
LOG_DIR=./logs
LOG_LEVEL=INFO

# 输出可视化保存路径（fusion / overlay / debug frames）
OUTPUT_VIS_DIR=./output

# ====== 外部服务 ======
# Weights & Biases（W&B）配置（如不使用留空）
WANDB_PROJECT=
WANDB_ENTITY=
# 敏感：W&B API Key 不应放在 repo 中，建议通过 CI / secrets 注入
#WANDB_API_KEY=

# ====== 安全 / 其他 ======
# 后端 API 基础路径（供脚本调用）
API_BASE_URL=http://localhost:8000

# 允许的摄像头分辨率（可留空以使用默认配置）
RGB_WIDTH=1280
RGB_HEIGHT=720
THERMAL_WIDTH=320
THERMAL_HEIGHT=240

# 运行者自定义标记（环境识别用）
ENV_TAG=dev
